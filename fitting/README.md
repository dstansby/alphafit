This folder contains the code that generates the corefit dataset from the
original distribution function files.

The following steps can be used to download the code, original data files, and
required dependencies:

1. Download a copy of this repository
2. Install [python](https://www.python.org/)
3. Install the required python dependencies by running
`pip install -r requirements.txt` from the `corefit` directory

Configuring data output
-----------------------
In the `corefit/fitting` directory, change the name of
`config.ini.template` to `config.ini` and fill in the directory where you
would like the output data to be saved to

Downloading original data files
-------------------------------
1. Create a directory to store all of the original magnetic field and
distribution function data files.
2. Configure heliopy to look in this location for the data files. Create
a heliopyrc file using
```bash
mkdir ~/.heliopy
echo "download_dir = /data/storage/directory" >> ~/.heliopy/heliopyrc
```
(replacing "/data/storage/directory" by the directory where all the data will
be stored)

3. Download the original distribution function files from ftp://apollo.ssl.berkeley.edu/pub/helios-data/E1_experiment/helios_raw/
The directory structure in your download location should look like
```bash
/data/storage/directory/helios/E1_experiment/helios_raw/helios_1/...
```
Once the `helios/E1_experiemnt` directory is created, the `helios_raw` directory
can be downloaded directly from the ftp server.

Regenerating the corefit dataset
--------------------------------
The corefit data set can now be re-generated by changing to the
`corefit/fitting` directory and running

```bash
python save_dist_params.py
```

This will generate the data set in hdf files, which are easily read by python.
To clean and convert the files to ascii .csv files run

```bash
python convert_distparams.py
```
